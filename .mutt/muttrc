set folder=imaps://imap.gmail.com/
set mbox=+[Gmail]/All\ Mail
set spoolfile=+[Gmail]/All\ Mail
set postponed=+[Gmail]/Drafts

unset imap_passive
set imap_keepalive=300
set mail_check=120

source ${HOME}/.mutt/gmail_account
set realname="Ivan c00kiemon5ter V Kanakarakis"

set smtp_url=smtps://${imap_user}:${imap_pass}@smtp.gmail.com
set ssl_force_tls=yes

set mbox_type=Maildir

#mailboxes =[Gmail]/All\ Mail =[Gmail]/Sent\ Mail =[Gmail]/Drafts
set imap_check_subscribed

set header_cache=${HOME}/.mutt/cache/headers
set message_cachedir=${HOME}/.mutt/cache/bodies

set tmpdir=/tmp
set certificate_file=${HOME}/.mutt/certificates
set mailcap_path=${HOME}/.mutt/mailcap
set signature=${HOME}/.mutt/sig
set sig_dashes

set editor="vim +:silent+?^$"
set ispell="aspell -e -c"

unset record
# use utf8
set charset=UTF8
# hide host details
set hidden_host
# ask before quit
set quit=ask-no
# ask before deleting
set delete=ask-yes
# do not mark unread or new messages as old
set nomark_old
# beep on new events
set beep_new
# continue on bg when suspended
unset suspend
# strip headers and eval mimes when piping, attempt to PGP/MIME decode the messages first
set pipe_decode
# strip headers and eval mimes before searching
set thorough_search
# don't collapse on an unread message
set uncollapse_jump
# gmail like sort
set sort=threads
set sort_aux=reverse-last-date-received
# thread based on regex
set sort_re
set reply_regexp        = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"

## pager stuff
# number of index lines to show
set pager_index_lines=5
# number of context lines to show
set pager_context=5
# don't go to next message automatically
set pager_stop
# scroll in menus
set menu_scroll
# don't split words
set smart_wrap
# and don't insert markers
set nomarkers
# show tildes like in vim
set tilde

# view html automatically
auto_view text/html
# save html for last
alternative_order text/plain text/enriched text/html
set quote_regexp        = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"

## formats
set date_format         = "%d/%m/%y at %I:%M%P"
set index_format        = "%3C [%Z] %D %-15.15F %s"
set status_format       = "-%r- %v ---[ Folder: %f, Msgs: %m%?n? New: %n?%?d? Del: %d?%?t? Tag: %t?%?l? %l? ]%?p?---- .: %p waiting to send :. ?--%>- (%P) ---"
set alias_format        = "%4n %t %-20a  %r"

# show headers when composing
set edit_headers
# skip to compose when replying
set fast_reply
# don't wait for sending... to complete
set sendmail_wait=-1
# ask for cc recipents
set askcc
# save attachments with the body
set fcc_attach
# forward attachments as part of body
unset mime_forward
set forward_format="Fwd: %s"
# decode when forwarding
set forward_decode
# set the attribution, quoting
set attribution="On %d, %n wrote:"
# reply to Reply to: field
set reply_to
# reply as w    homever it was to
set reverse_name
# include message in replies
set include
# include message in forwards
set forward_quote

## headers to show
ignore *
unignore From:
unignore To:
unignore Reply-To:
unignore Mail-Followup-To:
unignore Subject:
unignore Date:
unignore Organization:
unignore Newsgroups:
unignore CC:
unignore BCC:
unignore Message-ID:
unignore X-Mailer:
unignore User-Agent:
unignore X-Junked-Because:
unignore X-SpamProbe:
unignore X-Virus-hagbard:
hdr_order From: Subject: To: CC: BCC: Reply-To: Mail-Followup-To: Date: Organization: User-Agent: X-Mailer:

## sources
source ${HOME}/.mutt/colors.muttrc  # dark
#source ${HOME}/.mutt/colors.davep  # bright
#set alias_file=${HOME}/.mutt/alias
#source $alias_file
#source ${HOME}/.mutt/sidebar.muttrc

## bindings ~ vim like
bind pager i            exit
bind pager /            search
bind pager <up>         previous-line
bind pager <down>       next-line
bind pager k            previous-line
bind pager j            next-line
bind pager gg           top
bind pager G            bottom
bind index gg           first-entry
bind index G            last-entry
bind pager K            previous-undeleted
bind pager J            next-undeleted
bind index K            previous-unread
bind index J            next-unread
bind index,pager R      group-reply
bind index "^"          imap-fetch-mail

## macros
macro index gi "<change-folder>=INBOX<enter>"            "Go to inbox"
macro index ga "<change-folder>=[Gmail]/All Mail<enter>" "Go to all mail"
macro index gs "<change-folder>=[Gmail]/Starred<enter>"  "Go to starred messages"
macro index gd "<change-folder>=[Gmail]/Drafts<enter>"   "Go to drafts"
# to delete a message in gmail, place it under [Gmail]/Trash label
macro index,pager d "<save-message>=[Gmail]/Trash<enter><enter><refresh>" "Trash"

